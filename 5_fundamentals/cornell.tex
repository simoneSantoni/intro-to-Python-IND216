% !TeX document-id = {633b0608-a2e8-4fc5-8419-0a07e805313a}
%% =========================== Document class =============================
\documentclass[a4paper,11pt]{article}
% !TeX TXS-program:compile = txs:///pdflatex/[--shell-escape]

%% ========================= Essential packages ===========================
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage[margin=2cm]{geometry}   
%\usepackage{color}
\usepackage[dvipsnames]{xcolor}
\usepackage{tcolorbox}
\usepackage{paracol} % added <<<<<<<<<<<<<<<<<<<<<
\usepackage{lineno}
\usepackage{amsmath}
\tcbuselibrary{minted,skins,breakable}

%% =============================== Links ==================================
\usepackage[
colorlinks=true,
allcolors=BrickRed,
%citecolor=CadetBlue,
%urlcolor=CadetBlue
]{hyperref}%

% =========================== Utilities ===================================
\usepackage{lipsum}% generate filler text

%% ============================= Code input ===============================
\newtcblisting{pythoncode}[2][]{
  listing engine=minted,
  breakable,
  colback=green,
  colframe=black!70,
  listing only,
  minted style=colorful,
  minted language=python,
  minted options={numbersep=3mm,texcl=true,#1},
  left=5mm,enhanced,
  overlay={\begin{tcbclipinterior}\fill[black!25] (frame.south west)
            rectangle ([xshift=5mm]frame.north west);\end{tcbclipinterior}},
            #2,
}

%% Default fixed font does not support bold face
%\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{11} % for bold
%\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{11}  % for normal
%\usepackage{listings}
%% Python style for highlighting
%\newcommand\pythonstyle{\lstset{
%		language=Python,
%		basicstyle=\ttm,
%		morekeywords={self},              % Add keywords here
%		keywordstyle=\ttb\color{blue!80!black!90},
%		emph={MyClass,__init__},          % Custom highlighting
%		emphstyle=\ttb\color{orange!90!black!90},    % Custom highlighting style
%		stringstyle=\color{green!50!black!90},
%		frame=tb,                         % Any extra options here
%		showstringspaces=false
%}}
%% Python environment
%\lstnewenvironment{python}[1][]
%{
%	\pythonstyle
%	\lstset{#1}
%}
%{}
%% Python for external files
%\newcommand\pythonexternal[2][]{{
%		\pythonstyle
%		\lstinputlisting[#1]{#2}}}
%% Python for inline
%\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}

% =========================== Cornell Notes stuff ============================
% question
\newcommand{\question}[1]{% Ask the question
    \begin{tcolorbox}[colback=red!10,colframe=red!60!black!80,sidebyside align=top,width=\linewidth,before skip=1ex]
        #1
    \end{tcolorbox}%    
    \switchcolumn% now write in the right column   
}

% note
\newcommand{\note}[1]{% Add as many notes as you like
    \begin{tcolorbox}[colback=white!0,colframe=white!10,width=\linewidth,before skip=1ex]
        #1
    \end{tcolorbox}         
}   

% summary
\newcommand{\summary}[2][]{%
\begin{minipage}[b]{\textwidth}
    \vspace*{\baselineskip}
    \begin{tcolorbox}[colframe=green!45!blue!90,fonttitle=\large\bfseries\sffamily,
        after skip = \baselineskip,
        title=Summary]
        #2
    \end{tcolorbox}
\end{minipage}
#1}

% proportions
\setcolumnwidth{0.30\textwidth/20pt,0.70\textwidth}% column separation =20pt
\setlength{\columnseprule}{2pt} % column width
\colseprulecolor{gray}

% title
\title{%
        \begin{tcolorbox}[before skip = \baselineskip, after skip =-\baselineskip]
            \centering\Huge\sffamily Cornell Notes on Something   
        \end{tcolorbox}
	\footnote{...}
}

% ---------------------------------- Document attrs --------------------------
\date{}
\parindent=0pt


% ---------------------------------- Document contents ----------------------- 

\begin{document}
    
\maketitle  

\clearpage

\section{Here we start the first topic}

\begin{paracol}{2}
    \question{This is a question.} 
    \note{The first piece of evidence is mandatory.}
    \note{Now add up to five\ldots}%
    \note{Here is some Python code: 

%        \begin{python}
%        class MyClass(Yourclass):
%            def __init__(self, my, yours):
%        	bla = '5 1 2 3 4'
%        	print bla
%       \end{python}
    }
\end{paracol}

\section{Python example}
\begin{pythoncode}[linenos=true,]{colback=red!5!white,colframe=red!75!black,title=My nice heading}
# indent your Python code to put into an email
import glob
# glob supports Unix style pathname extensions
python_files = glob.glob('*.py')
for file_name in sorted(python_files):
    print '    ------' + file_name

    with open(file_name) as f:
        for line in f:
            print '    ' + line.rstrip()

    print
\end{pythoncode}

\vspace*{3ex} % breaks the red line

\begin{paracol}{2}  
    \question{Here's another question.}
    \note{\lipsum[4]}
    \note{\lipsum[2]}   
\end{paracol}

\summary[\clearpage]{This is a longer box that will will close the question and {\Large \bfseries start a new page.} \lipsum[2]}

\section{Second topic}

\begin{paracol}{2}
    \question{Here's another question to begin the new page.}   
    \note{\lipsum[3]}
    \note{\lipsum[4]}
\end{paracol}
        
\summary{And another summary that will close the question and {\Large 
\bfseries stay in the same page.}}

\section{Another topic, several questions}

\begin{paracol}{2}
    \question{This is  question I.}     
    \note{I The first piece of evidence is mandatory.}
    \note{Now add up to five \ldots}%
    \note{\ldots\ additional pieces of evidence.}
\end{paracol}
\vspace*{3ex} % breaks the red line
    
\begin{paracol}{2}
    \question{Here's  question II.} 
    \note{II The first piece of evidence is mandatory.}
    \note{Now add up to five \ldots}%
    \note{\ldots\ additional pieces of evidence.}
\end{paracol}

\clearpage% breaks the red line
\begin{paracol}{2}
    \question{And question III.}
    
    \note{III The first piece of evidence is mandatory.}
    \note{Now add up to five\ldots}%
    \note{\ldots\ additional pieces of evidence.}
    \note{\ldots\ and more \ldots}
    \note{\ldots\ and more.}
\end{paracol}

\summary{And another summary that will close the question and {\Large \bfseries stay in the same page.}}        

\lipsum[1]
    
\end{document}